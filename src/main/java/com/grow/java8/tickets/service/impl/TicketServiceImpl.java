package com.grow.java8.tickets.service.impl;import com.grow.java8.calories.json.dao.FoodDAOJsonImpl;import com.grow.java8.tickets.dao.TicketDAO;import com.grow.java8.tickets.data.Ticket;import com.grow.java8.tickets.enums.TimePoint;import com.grow.java8.tickets.exception.GeneratedException;import com.grow.java8.tickets.service.TicketService;import com.grow.java8.tickets.util.Util;import org.slf4j.Logger;import org.slf4j.LoggerFactory;import java.util.HashMap;import java.util.Map;public abstract class TicketServiceImpl implements TicketService {    private static final Logger logger = LoggerFactory.getLogger(FoodDAOJsonImpl.class);    private static final String BUYER_FOR_ERROR = "exception";    @Override    public Ticket sellTicket(String buyer) {        Ticket ticket = getTicketDAO().getLastFree().get();        logger.info("Buyer " + buyer+ ", Get ticket #" + ticket.getId());        ticket.setBuyer(buyer);        getTicketDAO().setTicket(ticket);        if (BUYER_FOR_ERROR.equals(buyer)){            throw new GeneratedException();        }        logger.info("Buyer " + buyer + " SAVED");        return ticket;    }    @Override    public Map<TimePoint, Long> getCountSold() {        Map<TimePoint, Long> result = new HashMap<>();        result.put(TimePoint.SYART, getTicketDAO().getCountSold());////        pause to check the insulation levels        Util.pause(6000);        result.put(TimePoint.FINISH, getTicketDAO().getCountSold());        return result;    }    @Override    public Ticket getTicket(String id) {        Ticket ticket1 = getTicketDAO().getTicket(id);//        pause to check the insulation levels        Util.pause(6000);        Ticket ticket2 = getTicketDAO().getTicket(id);        return ticket2;    }    @Override    public Ticket setBuyer(String id, String buyer) {        Ticket ticket = getTicketDAO().getTicket(id);        ticket.setBuyer(buyer);        return getTicketDAO().setTicket(ticket);    }    protected abstract TicketDAO getTicketDAO();}